import{r,j as e,I as u}from"./index-DSWP_m3q.js";import{g as o}from"./gallery-I8imnpWh.js";import{P as m}from"./PhotoEditModal-B31Aboxu.js";import"./catalog-BaTOuE_l.js";function f({path:c,id:d,fit:p,onDoubleClick:s}){const[n,l]=r.useState(!1),i=()=>l(a=>!a);function t(){return e.jsx("div",{className:"size-full animate-pulse "})}return e.jsxs("div",{onDoubleClick:()=>{s&&s()},onClick:()=>{i()},className:"photo relative aspect-square h-full overflow-clip group outline-primary "+(n?"outline-3":""),style:{contentVisibility:"auto",containIntrinsicSize:"220px 220px"},children:[e.jsx(r.Suspense,{fallback:e.jsx(t,{}),children:e.jsx("img",{className:"h-full w-full object-cover group-hover:scale-110 duration-200 group-hover:opacity-80"+p,src:c,alt:"",loading:"lazy",decoding:"async",fetchPriority:"low"})}),e.jsx("button",{className:"absolute top-1/2 left-1/2 -translate-1/2 group-hover:opacity-100 opacity-0 duration-200",children:e.jsx(u,{name:"circle-ellipsis",size:40,className:"fill-white z-10"})})]},d)}const h=r.memo(f);function b({grid:c,objectFit:d}){const p=d?" md:object-cover":" md:object-contain",[s,n]=r.useState(null);return e.jsxs("div",{className:"photo-library relative",children:[e.jsx("div",{className:"grid gap-2 grid-cols-3 md:[grid-template-columns:repeat(auto-fit,minmax(var(--grid,220px),1fr))]  p-3",style:{"--grid":`${c}px`},children:o.map((l,i)=>e.jsx(h,{id:i,path:o[i].path,fit:p,onDoubleClick:()=>n(o[i])}))}),s&&e.jsx(m,{photo:s,onClose:()=>n(null),onUpdated:(l,i)=>{if(i){const t=o.findIndex(a=>a.id===s.id);t!==-1&&o.splice(t,1)}else if(l){const t=o.findIndex(a=>a.id===l.id);t!==-1&&(o[t]=l)}}})]})}export{b as default};
