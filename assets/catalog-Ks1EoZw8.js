async function d(i,c){const e=await fetch(i,{signal:c,headers:{Accept:"application/json"}});if(!e.ok){const t=await e.text().catch(()=>"");throw new Error(`GET ${i} -> ${e.status} ${e.statusText}${t?`: ${t}`:""}`)}return e.json()}const m=i=>d("/api/albums",i);async function u(i,c,e){const t=`/api/albums/${encodeURIComponent(i)}`,a=await fetch(t,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(c),signal:e});if(!a.ok){const n=await a.text().catch(()=>"");throw new Error(`PATCH ${t} -> ${a.status}${n?`: ${n}`:""}`)}return await a.json()}const l=i=>d("/api/tags",i);function f(i,c,e,t={}){let a=e.albumId?.trim()||"";if(!a&&e.name&&(a=i.find(s=>s.name.localeCompare(e.name,void 0,{sensitivity:"accent"})===0)?.albumId||""),!a)return[];let n=c.filter(o=>o.albumId===a);const r=(o,s)=>o.year-s.year||o.month-s.month||o.day-s.day;return t.sort==="date-asc"&&(n=[...n].sort(r)),t.sort==="date-desc"&&(n=[...n].sort((o,s)=>-r(o,s))),t.limit&&t.limit>0&&(n=n.slice(0,t.limit)),n}function h(i,c,e,t={}){let a=String(e.tagId).trim();if(!a&&e.name&&(a=i.find(s=>s.name.localeCompare(e.name,void 0,{sensitivity:"accent"})===0)?.tagId??""),!a)return[];let n=c.filter(o=>o.tagId===a);const r=(o,s)=>o.year-s.year||o.month-s.month||o.day-s.day;return t.sort==="date-asc"&&(n=[...n].sort(r)),t.sort==="date-desc"&&(n=[...n].sort((o,s)=>-r(o,s))),t.limit&&t.limit>0&&(n=n.slice(0,t.limit)),n}async function p(i,c,e){const t=`/api/photos/${encodeURIComponent(i)}`,a=await fetch(t,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(c),signal:e});if(!a.ok){const n=await a.text().catch(()=>"");throw new Error(`PATCH ${t} -> ${a.status}${n?`: ${n}`:""}`)}return await a.json()}async function y(i,c){const e=`/api/photos/${encodeURIComponent(i)}`,t=await fetch(e,{method:"DELETE",headers:{Accept:"application/json"},signal:c});if(!t.ok){const a=await t.text().catch(()=>"");throw new Error(`DELETE ${e} -> ${t.status}${a?`: ${a}`:""}`)}return await t.json()}export{h as a,l as b,p as c,y as d,m as g,f as p,u};
